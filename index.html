<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EdiTV</title>
<style>
body {
  margin: 0;
  background: #0f0f0f;
  color: white;
  font-family: system-ui;
}
header {
  padding: 14px;
  text-align: center;
  background: #181818;
  font-size: 22px;
  font-weight: bold;
}
#videos {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  padding: 16px;
}
.video {
  background: #181818;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
}
.thumb {
  width: 100%;
  aspect-ratio: 16/9;
  object-fit: cover;
  display: block;
}
.video h3 {
  margin: 10px;
  font-size: 16px;
}
@media(max-width:700px){
  #videos { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<header>EdiTV</header>
<div id="videos"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseClient = supabase.createClient(
  "https://fdwzqfufmnuuerbocwys.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkd3pxZnVmbW51dWVyYm9jd3lzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5MjMzMTksImV4cCI6MjA4MjQ5OTMxOX0.v1lFWEyX3fuYL8riWa6D3s3zELn2pskeTJyg-63tWdE"
);

async function loadVideos() {
  const { data } = await supabaseClient
    .from("videos")
    .select("*")
    .order("created_at", { ascending:false });

  const el = document.getElementById("videos");
  el.innerHTML = "";

  data.forEach(v => {
    el.innerHTML += `
      <div class="video" onclick="location.href='watch.html?id=${v.id}'">
        <img class="thumb" src="${v.thumbnail_url}">
        <h3>${v.title}</h3>
      </div>
    `;
  });
}

loadVideos();
</script>
</body>
</html>
